# 遊戲開發數學
## 電腦圖學 - 線性代數 - 座標系統
參考 wiki：http://en.wikipedia.org/wiki/Coordinate_system

座標（Coordinate）是用來描述或標示某點在空間中絕對位置的有序數組。座標系（Coordinate System）是一特定的位置註記系統，用以確定某點或某目標的空間位置。

### 笛卡爾座標系統 (Cartesian Coordinate System)
最常用的 3D 座標系統，由三個相互垂直的軸組成：
- X 軸：通常代表左右方向
- Y 軸：通常代表上下方向  
- Z 軸：通常代表前後方向

座標空間分為左手座標系統與右手座標系統：
- 左手座標系統：X軸向右，Y軸向上，Z軸向前
- 右手座標系統：X軸向右，Y軸向上，Z軸向後

![alt text](images/lefthand_righthand.png)

### 齊次座標 (Homogeneous Coordinates)
電腦圖學 (Computer Graphics) 中使用 4 維向量來表示 3D 座標，稱為齊次座標：
```math
\begin{aligned}
位置座標 &= \begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix} \\
方向向量 &= \begin{bmatrix} x \\ y \\ z \\ 0 \end{bmatrix} \\
\\
第四個分量\ w\ 的意義： \\
w &= 1：表示位置點\ (Point) \\
w &= 0：表示方向向量\ (Vector)
\end{aligned}
```

為什麼使用齊次座標？

**1. 統一矩陣運算**

使用 4x4 矩陣可以將所有幾何轉換統一為矩陣乘法：位移 + 旋轉 + 縮放 = 組合成單一 4x4 矩陣運算

**2. 有效表示位移變換**

3x3 矩陣無法表示位移變換，但 4x4 矩陣可以：

**3. 區分點與向量**

在幾何運算中，點和方向向量的行為不同：

- **點 (Point)**：有位置，會受位移影響
- **向量 (Vector)**：只有方向和大小，不受位移影響

**4. 簡化投影運算**

透視投影需要進行除法運算，齊次座標讓這個過程更自然：

```math
投影後的齊次座標
\begin{bmatrix} x' \\ y' \\ z' \\ w' \end{bmatrix} \\
透視除法得到實際 3D 座標
\begin{bmatrix} x'/w' \\ y'/w' \\ z'/w' \end{bmatrix}
```

## 開發應用

### 1. 物體定位與移動
```math
// 計算物體在世界空間中的最終位置
世界位置 = 位移矩陣 \times 旋轉矩陣 \times 縮放矩陣 \times 本地位置
```

### 2. 攝影機控制
```math
// 第一人稱攝影機視圖矩陣
M_{view} = lookAt(攝影機位置, 目標位置, 上方向)
```

### 3. UI 與 HUD 元素
```math
// 將 3D 世界座標轉換為螢幕座標用於 UI 定位
螢幕座標 = WorldToScreen(世界座標)
```

# 參考延伸閱讀

[Coordinate Systems](https://learnopengl.com/Getting-started/Coordinate-Systems)

[3D Math Primer for Graphics and Game Development](https://gamemath.com/)

[Real-Time Rendering, 4th Edition](http://www.realtimerendering.com/)

[Mathematics for 3D Game Programming and Computer Graphics](https://mathfor3dgameprogramming.com/)
